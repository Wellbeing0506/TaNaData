<!doctype html>
<html>
	<head>
		<% include includes/head %>
	</head>
	<body>
<% include includes/topbar %>
	<div class="callout primary">
		<div class="row column">
			<h1>智工网视频管理系统</h1>
			<p class="lead">管理者添加、修改、删除视频</p>
		</div>
	</div>

<ul class="tabs" data-responsive-accordion-tabs="tabs medium-accordion large-tabs" id="example-tabs">
	<% for (var i in nameList) { %>
		<% if(i === "ee") { %>
  		<li class="tabs-title is-active"><a href="#panel<%= i %>" aria-selected="true"><%= nameList[i] %></a></li>
		<% } else { %>
  		<li class="tabs-title"><a href="#panel<%= i %>"><%= nameList[i] %></a></li>
		<% } %>
	<% } %>
</ul>



<div class="tabs-content" data-tabs-content="example-tabs">
	<% for (var i in nameList) { %>
		<% if(i === "ee") { %>
  		<div class="tabs-panel is-active" id="panel<%= i %>">
		<% } else { %>
  		<div class="tabs-panel" id="panel<%= i %>">
		<% } %>
    <h3><%= nameList[i] %>&nbsp&nbsp&nbsp<input type="image" data-open="addVideo<%= i %>" class=" alert" style="display: inline-block;height:20px;width:20px" src="/images/fi-page-add.svg"/></h3>
    <p> Some Videos about <%= nameList[i] %> ...</p>
  </div>
	<% } %>
</div>

<% for (var i in nameList) { %>
<div class="reveal small" id="addVideo<%= i %>" data-reveal>
	<h1>新增视频-<%= nameList[i] %></h1>
	<hr>
	<div class="form-group">
		<label>视频网址</label>
		<input type="text" class="form-control" name="videoURL" id="videoURL">
	</div>
	<div class="form-group">
		<label>视频名称</label>
		<input type="text" class="form-control" name="videoName" id="videoName">
	</div>
	<div class="form-group">
		<label>视频说明</label>
		<textarea class="form-control" name="videoDescription" id="videoDescription"></textarea>
	</div>
		<button onclick='addNewVideo("<%= i %>")' class="button expanded">新增</button>
		<button class="close-button" data-close aria-label="Close modal" type="button">
			<span aria-hidden="true">&times;</span>
		</button>
</div>
<% } %>


<script>
	function addNewVideo(type) {
		var videoURL = $("#videoURL").val(); 
		var videoName = $("#videoName").val(); 
		var videoDescription = $("#videoDescription").val(); 
		var thisUser = <%- JSON.stringify(user) %>
		console.log(thisUser);
		var myPost = {videoURL : videoURL, videoName : videoName, videoDescription : videoDescription, type:type , thisUser:JSON.stringify(thisUser)};
		console.log(myPost);
		$.ajax({
			url : "/videoAdd",
			type: "POST",
			data : myPost,
			success : function(data) {
				console.log(data);
			},
			error : function(XMLHttpRequest, textStatus, errorThrown) { 
				alert("Status: " + textStatus,"Error"+errorThrown);
			}
		});
	}
</script>


<% include includes/js %>




<% include includes/foundation %>

	</body>
</html> 
